var a;function MigratoryDataClient(){if(!Number.MAX_SAFE_INTEGER)Number.MAX_SAFE_INTEGER=Math.pow(2,53)-1;this.a();this.c=6;this.d=true;this.e(false);this.f="MigratoryDataClient WebSocket Client v6.0.10, version: "+this.c;this.g=MigratoryDataClient.h;this.i=this.j;this.k=this.l;this.o=this.n=this.m=false;if(window.pako)this.o=window.pako;else try{require.resolve("pako");this.o=require("pako")}catch(b){this.o=false}}a=MigratoryDataClient.prototype;a.p=function(){};a.q=function(){};a.r=function(){};
a.s=function(b){b=String(b);for(var c,d,e,f="",g=0,h=b.length%3;g<b.length;){if((c=b.charCodeAt(g++))>255||(d=b.charCodeAt(g++))>255||(e=b.charCodeAt(g++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");c=c<<16|d<<8|e;f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c>>
6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c&63)}return h?f.slice(0,h-3)+"===".substring(h):f};
a.t=function(b){b=String(b).replace(/[\t\n\f\r ]+/g,"");if(!/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/.test(b))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");b+="==".slice(2-(b.length&3));for(var c,d="",e,f,g=0;g<b.length;){c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(g++))<<18|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(g++))<<
12|(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(g++)))<<6|(f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(g++)));d+=e===64?String.fromCharCode(c>>16&255):f===64?String.fromCharCode(c>>16&255,c>>8&255):String.fromCharCode(c>>16&255,c>>8&255,c&255)}return d};
a.a=function(){this.u=function(b){console.log(b)};this.v=1;this.w=MigratoryDataClient.x;this.y=2;this.a0=this.z=null;this.a1=Number.MAX_SAFE_INTEGER;this.a2=[];this.a4=this.a3=null;this.a5=[];this.d=false;this.a7=this.a6=null;this.a8=[];this.a9={};this.aa=[];this.ab={};this.ae=this.ad=this.ac=null;this.af=(new Date).getTime();this.ag=null;this.ah=[];this.aj=this.ai=0;this.ak=false;this.al=null;this.am=[];this.aq=this.ap=this.ao=this.an=null;this.ar={};this.as={};this.as.at=(new Date).getTime();this.as.au=
null;this.as.av=[];this.aw=null;this.ax=3;this.ay=5E3;this.az=MigratoryDataClient.TRUNCATED_EXPONENTIAL_BACKOFF;this.b0=2E4;this.b1=36E4;this.b2=3E4+Math.floor(Math.random()*1E4);this.b3=false;this.b4=true};MigratoryDataClient.b5=9E5;MigratoryDataClient.b6=1E4;MigratoryDataClient.b7="SUBSCRIBE";MigratoryDataClient.b8="UNSUBSCRIBE";MigratoryDataClient.b9="PING";MigratoryDataClient.ba="SEND_AUTHORIZATION_TOKEN";MigratoryDataClient.bb="CONNECT";MigratoryDataClient.bc="PUBLISH";
MigratoryDataClient.bd="PAUSE";MigratoryDataClient.be="RESUME";MigratoryDataClient.bf=0;MigratoryDataClient.bg=1;MigratoryDataClient.bh=2;MigratoryDataClient.bi=3;MigratoryDataClient.bj=4;MigratoryDataClient.bk=5;MigratoryDataClient.bl=6;MigratoryDataClient.bm=7;MigratoryDataClient.h=8;MigratoryDataClient.bn=9;MigratoryDataClient.bo=10;MigratoryDataClient.bp="SERVER_UP";MigratoryDataClient.bq="SERVER_DOWN";MigratoryDataClient.br="SERVER_RECYCLE";MigratoryDataClient.bs=0;MigratoryDataClient.bt=1;
MigratoryDataClient.bu="1";MigratoryDataClient.bv="2";MigratoryDataClient.bw="3";MigratoryDataClient.bx="4";MigratoryDataClient.by=1;MigratoryDataClient.bz="ERROR_TIMEOUT";MigratoryDataClient.c0="ERROR_HTTP";MigratoryDataClient.c1="ERROR_SERVER";MigratoryDataClient.c2="SUBSCRIBE_TYPE_NORMAL";MigratoryDataClient.c3="SUBSCRIBE_TYPE_HISTORY";MigratoryDataClient.c4="SUBSCRIBE_TYPE_RECOVERY";MigratoryDataClient.c5="cache_ok";MigratoryDataClient.c6="cache_ok_no_new_message";MigratoryDataClient.c7="cache_ok_new_epoch";
MigratoryDataClient.c8="no_cache";MigratoryDataClient.c9="no_seq";MigratoryDataClient.ca="end";MigratoryDataClient.cb=0;MigratoryDataClient.cc=1;MigratoryDataClient.cd=2;MigratoryDataClient.ce=3;MigratoryDataClient.x=0;MigratoryDataClient.cf=1;MigratoryDataClient.cg=2;a=MigratoryDataClient.prototype;
a.ch=function(b,c){if(b.name)b=b.name;else{var d=b.toString();b=d.substring(d.indexOf("function")+8,d.indexOf("("));b=b.replace(/^\s+|\s+$/g,"");if(b.length===0)b="anonymous";if(b==="anonymous"&&typeof c==="object")for(var e=0;e<c.length;e++)for(var f in c[e])if(c[e].hasOwnProperty(f)&&typeof c[e][f]==="function")if(c[e][f].toString()===d)return f}return b};
a.ci=function(b){if(b===null||b===undefined||typeof b==="number"||typeof b==="boolean")return b;else if(typeof b==="string")return'"'+b+'"';else if(typeof b==="function")return this.ch(b,this)+"()";else if(b instanceof Array)return this.cj(b);var c="{",d=0;for(var e in b){if(d>0)c+=", ";if(b.hasOwnProperty(e))c+=e+":"+this.ci(b[e]);d++}c+="}";return c};a.ck=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=Math.random()*16|0;return(b=="x"?c:c&3|8).toString(16)})};
a.cl=function(b,c){var d=MigratoryDataClient.b6;if(b>0){if(b<=this.ax)d=b*this.ay-Math.floor(Math.random()*this.ay);else if(this.az===MigratoryDataClient.TRUNCATED_EXPONENTIAL_BACKOFF){b=b-this.ax;d=Math.min(this.b0*Math.pow(2,b)-Math.floor(Math.random()*this.b0*b),this.b1)}else d=this.b0;if(c!==undefined&&d<MigratoryDataClient.b6)d=MigratoryDataClient.b6}return d};a.cm=function(b,c){var d={};if(c.length>0)for(var e=0;e<c.length;e++)d[c[e]]=b[c[e]];else for(e in b)d[e]=b[e];return d};
a.cn=function(b){for(var c=b.length,d=b.length-1;d>=0;d--){var e=b.charCodeAt(d);if(e>127&&e<=2047)c++;else if(e>2047&&e<=65535)c+=2}return c};a.co=function(b){return this.o.inflateRaw(this.t(b),{to:"string"})};a.cp=function(b){return this.s(this.o.deflateRaw(b,{to:"string"}))};a.cq=function(b,c){for(var d=0;d<b.length;d++)if(b[d]===c)return d;return-1};a.cr=function(b){for(var c=[],d=0;d<b.length;d++)c.push(b[d]);return c};
a.cs=function(b,c){for(var d=[],e=0;e<b.length;e++)this.cq(c,b[e])===-1&&d.push(b[e]);return d};a.ct=function(b,c){for(var d=[],e=0;e<b.length;e++)this.cq(c,b[e])!==-1&&d.push(b[e]);return d};a.cu=function(b,c){for(var d=this.cr(b),e=0;e<c.length;e++)this.cq(b,c[e])===-1&&d.push(c[e]);return d};
a.cv=function(b,c,d,e,f,g){if(typeof c!=="object"||typeof c.length!=="number")throw"Error: "+b+" - invalid argument; expected a list";if(e!==null&&c.length<e)throw"Error: "+b+" - invalid argument; expected a list with a least "+e+" elements";if(d!==null)for(e=0;e<c.length;e++)if(typeof c[e]!==d)throw"Error: "+b+" - invalid argument; the element on the position '"+e+"' is not of type '"+d+"'";if(typeof f==="object"&&typeof f.test==="function")for(e=0;e<c.length;e++)if(!f.test(c[e]))throw"Error: "+
b+". "+g+"; the element on the position '"+e+"' is the cause of the error";};a.cj=function(b){for(var c="[",d=0;d<b.length;d++){if(d>0)c+=", ";c+=this.ci(b[d])}c+="]";return c};a.cw=function(b,c,d,e,f){this.cv(b,c,d,e,/^\/([^\/]+\/)*([^\/]+|\*)$/,f)};
a.cx=function(b,c){if(b===this.cy.cz)this.d0(c);else if(b===this.cy.d1)this.d2(c);else if(b===this.cy.d3)this.d4(c);else if(b===this.cy.d5)this.d6(c);else if(b!==this.cy.b9)if(b===this.cy.d7)this.d8(c);else if(this.an!==null)if(this.an.d9===MigratoryDataClient.bb&&b===this.cy.bb)this.da(c);else if(this.an.d9===MigratoryDataClient.b7&&b===this.cy.b7)this.db(c);else this.an.d9===MigratoryDataClient.b8&&b===this.cy.b8&&this.dc(c)};
a.da=function(b){if(this.a7!==MigratoryDataClient.bp){var c=b[this.cy.dd];if(c===undefined){this.u("Received a initial connect response without sessionId - message ignored!");this.de(MigratoryDataClient.c1,"server connect response is missing the session id");return}this.ac=c;c=b[this.cy.df];if(c!==undefined&&c!==null)if(c==1)this.w=MigratoryDataClient.cf;else if(c==2)this.w=MigratoryDataClient.cg;c=b[this.cy.dg];if(c!==undefined&&c!==null)this.b2=c*1E3*1.4;this.ad=b[this.cy.dh];this.dj(b[this.cy.di]);
c=b[this.cy.dk];if(c!==undefined&&c!==null)this.a1=c;c=this.a7;this.a7=MigratoryDataClient.bp;this.aj=this.ai=0;this.dl();if(c!==MigratoryDataClient.br){this.as.av[this.a6]!==undefined&&this.as.av[this.a6].dm++;if(c===null||this.ak){c={type:MigratoryDataClient.NOTIFY_SERVER_UP,info:this.a2[this.a6].dn};this.dp(c)}}else this.as.av[this.a6]!==undefined&&this.as.av[this.a6].dq++;this.ak=false;c=b[this.cy.dr];b=b[this.cy.ds];c=b!=undefined&&b!=null&&b==MigratoryDataClient.ce?{type:MigratoryDataClient.NOTIFY_CONNECT_DENY,
info:c}:{type:MigratoryDataClient.NOTIFY_CONNECT_OK,info:c};this.dp(c)}this.dt()};a.db=function(){this.dt()};a.dc=function(){this.dt()};
a.d0=function(b){var c=this.cy.du,d=this.cy.dv,e=this.cy.dw,f=this.cy.dx,g=this.cy.dy,h=this.cy.dz,i=this.cy.e0;if(b[c]===undefined||b[d]===undefined)this.u("Received an invalid PUBLISH message: missing du or/and dv - message ignored!");else if(this.ab[b[c]]!==undefined){this.dj(b[this.cy.di]);var j=false;if(b[h]!==undefined&&parseInt(b[h])==1)j=true;h=false;if(b[i]!==undefined&&parseInt(b[i])==1)h=true;i=MigratoryDataClient.MESSAGE_TYPE_UPDATE;if(b[f]!==undefined)i=b[f]==MigratoryDataClient.bu?MigratoryDataClient.MESSAGE_TYPE_SNAPSHOT:
b[f]==MigratoryDataClient.bw?MigratoryDataClient.MESSAGE_TYPE_RECOVERED:b[f]==MigratoryDataClient.bx?MigratoryDataClient.MESSAGE_TYPE_HISTORICAL:MigratoryDataClient.MESSAGE_TYPE_UPDATE;f="";if(b[e]!==undefined)f=b[e];d=b[d];if(h)if(this.o)d=this.co(d);else this.u("Please install `pako` package to decompress compressed messages.");c={subject:b[c],content:d,replySubject:b[g],retained:j,type:i,qos:MigratoryDataClient.QOS_STANDARD,seq:0,epoch:0,compressed:h,closure:f};g=this.cy.e1;if(b[g]!==undefined){g=
((new Date).getTime()&16777215)-b[g];if(g>-14400000)c.latency=g}if(this.w==MigratoryDataClient.cf&&this.e2(b)==true){g=parseInt(b[this.cy.e3]);b=parseInt(b[this.cy.e4]);c.qos=MigratoryDataClient.QOS_GUARANTEED;c.seq=b;c.epoch=g;b=this.e5(c.subject,this.ab[c.subject],b,g);if(b=="lower")return;else if(b=="higher"){this.e6();return}}else if(this.w==MigratoryDataClient.cg&&this.e2(b)==true){g=parseInt(b[this.cy.e3]);b=parseInt(b[this.cy.e4]);c.qos=MigratoryDataClient.QOS_GUARANTEED;c.seq=b;c.epoch=g;
b=this.e7(c.subject,this.ab[c.subject],b,g);if(b=="lower")return}this.as.av[this.a6]!==undefined&&this.as.av[this.a6].e8++;this.dp({message:c})}};a.e2=function(b){var c=this.cy.e9,d=true;if(b[c]!==undefined&&parseInt(b[c])==MigratoryDataClient.bs)d=false;return d};
a.e5=function(b,c,d,e){if(c.seqid!=e){c.seq=d;c.messagesReceivedUntilRecovery++;c.seqid=e;return"in_order"}if(d<=c.seq)return"lower";if(d==c.seq+1){if(c.currentSubscribeType==MigratoryDataClient.c4){c.currentSubscribeType=MigratoryDataClient.c2;b={type:MigratoryDataClient.NOTIFY_DATA_SYNC,info:b};this.dp(b)}c.seq+=1;c.messagesReceivedUntilRecovery++;return"in_order"}if(c.messagesReceivedUntilRecovery>0){this.u("Missing data: expected seq "+(c.seq+1)+", instead received seq "+d+" !");return"higher"}this.u("Reset seq '"+
c.seq+"'. New seq is '"+d+"' !");c.seq=d;c.messagesReceivedUntilRecovery++;b={type:MigratoryDataClient.NOTIFY_DATA_RESYNC,info:b};this.dp(b);return"in_order"};a.e7=function(b,c,d,e){if(c.seqid!=e){c.seq=d;c.messagesReceivedUntilRecovery++;c.seqid=e;return"in_order"}if(d<=c.seq)return"lower";if(c.currentSubscribeType==MigratoryDataClient.c4)c.currentSubscribeType=MigratoryDataClient.c2;c.seq=d;c.messagesReceivedUntilRecovery++;return"in_order"};
a.de=function(b,c){b=b+", "+c;c=this.as.av[this.a6].ea;if(c[b]===undefined)c[b]=1;else c[b]++;this.aj++;this.e6()};
a.d2=function(b){var c=this.cy.dr,d=this.cy.du;if(b[c]===undefined||b[d]===undefined)this.u("Received an invalid ENTITLEMENT_CHECK message: missing du or/and dr - message ignored!");else{var e=true,f=MigratoryDataClient.NOTIFY_SUBSCRIBE_DENY;switch(b[c]){case "a":f=MigratoryDataClient.NOTIFY_SUBSCRIBE_ALLOW;e=false;break;case "d":f=MigratoryDataClient.NOTIFY_SUBSCRIBE_DENY;break}if(e===true){this.aa=this.cs(this.aa,[b[d]]);delete this.ab[b[d]]}this.dp({type:f,info:b[d]})}};
a.dp=function(b){this.a5.push(b);setTimeout(function(c){return function(){var d=c.a5.shift();"message"in d?c.a3(d.message):c.a4(d)}}(this),0)};a.d4=function(b){b!==undefined&&b!==null&&Object.keys(b).length>0&&this.eb(b)};a.eb=function(b){var c=b[this.cy.dw];b=b[this.cy.dr];c!==undefined&&c!==null&&this.dp({type:this.ec(b),info:c})};a.d8=function(b){var c=b[this.cy.dr];b=b[this.cy.ed];c!==undefined&&c!==null&&b!==undefined&&this.dp({type:c,info:b})};
a.d6=function(b){var c=b[this.cy.du];b=b[this.cy.dx];this.u("recovery status for subject:"+c+" is:"+b);if(MigratoryDataClient.ca==b)for(b=0;b<this.aa.length;b++){c=this.ab[this.aa[b]];var d=c.cacheRecoveryStatus;if(MigratoryDataClient.c5==d||MigratoryDataClient.c7==d||MigratoryDataClient.c6==d)c.nrOfConsecutiveRecovery=0;else{c.messagesReceivedUntilRecovery=0;c.seqid!=Number.MAX_SAFE_INTEGER&&c.nrOfConsecutiveRecovery++}}else{c=this.ab[c];if(c!==null)c.cacheRecoveryStatus=b}};
a.ec=function(b){if(b===undefined||b===null)return MigratoryDataClient.NOTIFY_PUBLISH_FAILED;switch(b){case "OK":return MigratoryDataClient.NOTIFY_PUBLISH_OK;case "DENY":return MigratoryDataClient.NOTIFY_PUBLISH_DENIED;default:return MigratoryDataClient.NOTIFY_PUBLISH_FAILED}};
a.dj=function(b){if(b!==undefined)if(this.a0==null)this.a0=b;else if(b!==this.a0){this.a0=b;for(b=0;b<this.aa.length;b++)this.ab[this.aa[b]]={seqid:Number.MAX_SAFE_INTEGER,seq:0,history:this.ab[this.aa[b]].history,nrOfConsecutiveRecovery:0,messagesReceivedUntilRecovery:0,cacheRecoveryStatus:MigratoryDataClient.c5,currentSubscribeType:MigratoryDataClient.c2}}};
a.ee=function(){this.as.au=(new Date).getTime();this.as.av[this.a6]!==undefined&&this.as.av[this.a6].ef++;this.ag!==null&&this.dl();this.an!==null&&this.an.d9===MigratoryDataClient.b9&&this.dt();var b=(new Date).getTime();if(b-this.af>=MigratoryDataClient.b5){this.af=b;b={};b.d9=MigratoryDataClient.b9;this.eg(b)}};a.dl=function(){this.ag!==null&&clearTimeout(this.ag);if(this.b2>0)this.ag=setTimeout(function(b){return function(){b.aj++;b.e6()}}(this),this.b2)};
a.e6=function(){this.as.av[this.a6]!==undefined&&this.as.av[this.a6].eh++;if(this.aq!==null){clearTimeout(this.aq);this.aq=null}this.ei();this.ej();this.ek();if(this.a7!==null)this.a7=MigratoryDataClient.bq;var b=this.a2[this.a6].dn;this.ah.push(this.a2[this.a6]);this.ad=this.ac=this.a6=null;this.ai++;if(this.ag!==null){clearTimeout(this.ag);this.ag=null}if(!this.ak&&(this.ai===this.v||this.ai===this.a2.length)){this.ak=true;this.dp({type:MigratoryDataClient.NOTIFY_SERVER_DOWN,info:b})}if(this.a2.length>
0){b={};b.d9=MigratoryDataClient.bb;this.eg(b)}if(this.aa.length>0){b={};b.d9=MigratoryDataClient.b7;b.aa=this.aa;this.eg(b)}};
a.el=function(){this.as.av[this.a6]!==undefined&&this.as.av[this.a6].eh++;if(this.aq!==null){clearTimeout(this.aq);this.aq=null}this.al="";this.ei();this.ej();this.ek();if(this.a7!==null)this.a7=MigratoryDataClient.bq;var b=this.a2[this.a6].dn;this.ah.push(this.a2[this.a6]);this.ad=this.ac=this.a6=null;this.ai++;if(this.ag!==null){clearTimeout(this.ag);this.ag=null}if(!this.ak&&(this.ai===this.v||this.ai===this.a2.length)){this.ak=true;this.dp({type:MigratoryDataClient.NOTIFY_SERVER_DOWN,info:b})}};
a.em=function(){this.dt();if(this.a2.length>0){var b={};b.d9=MigratoryDataClient.bb;this.eg(b)}if(this.aa.length>0){b={};b.d9=MigratoryDataClient.b7;b.aa=this.aa;this.eg(b)}};
a.en=function(){this.eo();var b="";b+=this.ep(this.g,this.cy,this.z,this.f,this.by,this.c);var c=this.a2[this.a6].dn;if(this.m==false||this.n)if("/"!==c.substring(c.length-1,c.length))c+="/";var d=this.cl(this.aj,MigratoryDataClient.bb);this.ap=setTimeout(function(e){return function(){e.ap=null;e.de(MigratoryDataClient.bz,e.an.d9)}}(this),d);this.i(c,this.a6,b)};
a.eq=function(){this.aa=this.cu(this.aa,this.an.aa);for(var b=this.cy,c="",d=0;d<this.an.aa.length;d++){var e=this.an.aa[d];if(this.an.er!==undefined&&this.an.er===true)this.ab[e]={seqid:Number.MAX_SAFE_INTEGER,seq:0,history:this.an.es[e],needsRecovery:false,nrOfConsecutiveRecovery:0,messagesReceivedUntilRecovery:0,cacheRecoveryStatus:MigratoryDataClient.c5,currentSubscribeType:MigratoryDataClient.c2};c+=this.et(e,this.ab[e],this.g,this.ac,b)}this.ap=setTimeout(function(f){return function(){f.ap=
null;f.de(MigratoryDataClient.bz,f.an.d9)}}(this),MigratoryDataClient.b6);this.k(c)};
a.eu=function(){this.aa=this.cs(this.aa,this.an.aa);if(this.a7!==MigratoryDataClient.bp){this.dt();for(var b=0;b<this.an.aa.length;b++)delete this.ab[this.an.aa[b]]}else{var c=this.cy,d="";for(b=0;b<this.an.aa.length;b++){var e=this.an.aa[b];d+=this.ev(e,this.ab[e],this.g,this.ac,c);delete this.ab[e]}this.ap=setTimeout(function(f){return function(){f.ap=null;f.de(MigratoryDataClient.bz,f.an.d9)}}(this),MigratoryDataClient.b6);this.k(d)}};
a.ew=function(){if(this.a7!==MigratoryDataClient.bp)this.dt();else{var b=this.ex(this.ac,this.cy,this.g,this.ad);this.ap=setTimeout(function(c){return function(){c.ap=null;c.de(MigratoryDataClient.bz,c.an.d9)}}(this),MigratoryDataClient.b6);this.k(b)}};a.ey=function(){this.a7===MigratoryDataClient.bp&&this.k(this.f0(this.an.ez,this.ac,this.cy,this.g,this.ad))};
a.f1=function(){var b=this.cy;if(this.a7!==MigratoryDataClient.bp){b=this.an.f2.closure;if(b!==undefined&&b!==null){b={type:MigratoryDataClient.NOTIFY_PUBLISH_FAILED,info:b};this.dp(b)}}else{b=this.f3(this.an.f2,this.g,this.ac,b,this.z,this.ad);var c=this.cn(b),d=12;if(this.g!==MigratoryDataClient.h){d=this.a2[this.a6].dn;d=45+d.substring(d.indexOf("://")+3).length+(""+c).length}if(c+d>this.a1){b=this.an.f2.closure;if(b!==undefined&&b!==null){b={type:MigratoryDataClient.NOTIFY_MESSAGE_SIZE_LIMIT_EXCEEDED,
info:b};this.dp(b)}}else this.k(b)}};a.dt=function(b){if(this.am.length!==0)if(b!==undefined&&b!==null){if(this.am[0].d9===b){this.am.shift();this.ej();this.e(false)}}else{this.am.shift();this.ej();this.e(false)}};a.eg=function(b){this.am.push(b);this.f4(false)};a.e=function(b){this.am.length!==0&&setTimeout(function(c){return function(){c.f4(b)}}(this),0)};
a.f4=function(b){if(this.d)if(!(!b&&(this.an!==null||this.am.length===0))){this.an=this.am[0];switch(this.an.d9){case MigratoryDataClient.b7:this.eq();break;case MigratoryDataClient.b8:this.eu();break;case MigratoryDataClient.b9:this.ew();break;case this.ba:this.ey();this.dt();break;case MigratoryDataClient.bb:this.en();break;case MigratoryDataClient.bc:this.f1();this.dt();break;case MigratoryDataClient.bd:this.el();break;case MigratoryDataClient.be:this.em();break}}};
a.ei=function(){for(;this.am.length>0;){var b=this.am[0];switch(b.d9){case MigratoryDataClient.b7:var c=this.cs(b.aa,this.aa);if(c.length>0){this.aa=this.cu(this.aa,c);if(b.er!==undefined&&b.er===true)for(var d=0;d<c.length;d++)this.ab[c[d]]={seqid:Number.MAX_SAFE_INTEGER,seq:0,history:b.es[c[d]],needsRecovery:false,nrOfConsecutiveRecovery:0,messagesReceivedUntilRecovery:0,cacheRecoveryStatus:MigratoryDataClient.c5,currentSubscribeType:MigratoryDataClient.c2}}break;case MigratoryDataClient.b8:c=this.ct(b.aa,
this.aa);if(c.length>0){this.aa=this.cs(this.aa,c);for(d=0;d<c.length;d++)delete this.ab[c[d]]}break;case MigratoryDataClient.bc:b.f2.closure!==undefined&&b.f2.closure!==null&&this.dp({type:MigratoryDataClient.NOTIFY_PUBLISH_FAILED,info:b.f2.closure});break}this.am.shift()}};a.ej=function(){this.an=null;if(this.ap!==null){clearTimeout(this.ap);this.ap=null}};
a.ek=function(){this.p();if(this.ae!==null){if(this.m)if(this.n){this.ae.removeAllListeners("close");this.ae.close()}else{this.ae.removeAllListeners("close");this.ae.destroy()}else{this.ae.onmessage=function(){};this.ae.onopen=function(){};this.ae.onclose=function(){};this.ae.close()}delete this.ae;this.ae=null}};
a.f5=function(){this.ej();this.ek();this.a7=this.a6=null;this.aa=[];this.ad=this.ac=null;this.ah=[];this.aj=this.ai=0;this.ak=false;this.am=[];this.ab={};this.w=MigratoryDataClient.x;if(this.aq!==null){clearTimeout(this.aq);this.aq=null}if(this.ag!==null){clearTimeout(this.ag);this.ag=null}};a.eo=function(){if(this.a6===null)this.a6=this.f6()};
a.f6=function(){var b=this.cs(this.a2,this.ah);if(b.length===0){this.ah=[];b=this.a2}if(b.length===0)throw"Error: f6() No available servers!";for(var c=0,d=0;d<b.length;d++)c+=b[d].f7;var e=-1;if(c===0)e=Math.floor(b.length*Math.random());else{var f=Math.floor(c*Math.random());for(d=c=0;d<b.length;d++){c+=b[d].f7;if(c>f){e=d;break}}}return this.cq(this.a2,b[e])};
a.j=function(b,c,d){b=b.substring(0,b.indexOf("://"))==="http"?"ws://"+b.substring(b.indexOf("://")+3)+"WebSocketConnection":"wss://"+b.substring(b.indexOf("://")+3)+"WebSocketConnection-Secure";this.ae=new WebSocket(b);this.al=this.ck();this.ae.f8=this.al;this.ae.onmessage=function(e){return function(f){e.f9(f.data)}}(this);this.ae.onopen=function(e,f){return function(){e.k(f)}}(this,d);this.ae.onerror=function(e){return function(f){e.u(f)}}(this);this.ae.onclose=function(e){return function(){if(e.al===
e.ae.f8){e.ej();e.aj++;e.dt(MigratoryDataClient.bb);var f=e.cl(e.aj);e.aq=setTimeout(function(g){return function(){g.e6()}}(e),f)}}}(this)};a.l=function(b){this.ae!=null&&this.ae.readyState===1&&this.ae.send(b)};a.f9=function(b){var c=this.ae;if(!(c===null||c.readyState!==1))if(b){c=b;for(var d=c.indexOf(this.cy.fa);d!==-1;){c=c.substring(0,d);this.fb(c);c=b.substring(d+1);d=c.indexOf(this.cy.fa)}}};
a.fb=function(b){for(var c=0,d="\u0000",e={};;){var f=b.indexOf(this.cy.fc,c);if(f===-1)break;if(f-c>0){c=b.substring(c,f);d=c.charAt(0);e=this.fd(c);this.cx(d,e)}c=f+1}this.ee()};
a.fd=function(b){var c=b.charAt(0);if(this.cy.fe[c]===undefined)this.u("Received an invalid message: operation unknown: '"+c+"' [char code '"+c.charCodeAt(0)+"'] - message ignored!");else{var d=1;for(c={};;){if(d>=b.length)break;var e=b.charAt(d),f=b.indexOf(this.cy.ff,d+1);if(f===-1){this.u("Received an invalid message: header end missing, header='"+e+"' [char code '"+e.charCodeAt(0)+"']- message ignored, msg='"+b+"', header position="+d);return c}if(this.cy.fg[e]===undefined)this.u("Received an invalid message: unknown header: '"+
e+"' [char code '"+e.charCodeAt(0)+"'] - header ignored, msg='"+b+"', header position="+d);else{d++;var g="";switch(this.cy.fh[e]){case this.fi.fj:g=this.fk(this.cy,b.substring(d,f));break;case this.fi.fl:g=this.fm(this.cy,b.substring(d,f));break}d=c[e];if(d===undefined)c[e]=g;else if(c[e]instanceof Array)c[e][c[e].length]=g;else{c[e]=[];c[e][0]=d;c[e][1]=g}}d=f+1}return c}};
a.ep=function(b,c,d,e,f,g){var h="";h+=c.bb;if(b!==null){h+=c.fn;h+=this.fo(c,b);h+=c.ff}if(d!==null){h+=c.ed;h+=this.fp(c,d);h+=c.ff}if(e!==null){h+=c.fq;h+=this.fp(c,e);h+=c.ff}if(f!==null){h+=c.fr;h+=this.fo(c,f);h+=c.ff}h+=c.fs;h+=this.fo(c,g);h+=c.ff;h+=c.fc;return h};
a.et=function(b,c,d,e,f){var g="";g+=f.b7;g+=f.du;g+=this.fp(f,b);g+=f.ff;if(d!==null){g+=f.fn;g+=this.fo(f,d);g+=f.ff}if(e!==null){g+=f.dd;g+=this.fo(f,e);g+=f.ff}b=this.ft(c);if(b==MigratoryDataClient.c3){g+=f.fu;g+=this.fo(f,c.history);g+=f.ff}else if(b==MigratoryDataClient.c4){g+=f.e3;g+=this.fo(f,c.seqid);g+=f.ff;g+=f.e4;g+=this.fo(f,c.seq+1);g+=f.ff}g+=f.fc;return g};
a.ev=function(b,c,d,e,f){c="";c+=f.b8;c+=f.du;c+=this.fp(f,b);c+=f.ff;if(e!==null){c+=f.dd;c+=this.fo(f,e);c+=f.ff}if(d!==null){c+=f.fn;c+=this.fo(f,d);c+=f.ff}c+=f.fc;return c};a.ex=function(b,c,d,e){var f="";f+=c.b9;f+=c.dd;f+=this.fo(c,b);f+=c.ff;if(d!==null){f+=c.fn;f+=this.fo(c,d);f+=c.ff}if(e!==null){f+=c.dh;f+=this.fo(c,e);f+=c.ff}f+=c.fc;return f};
a.f0=function(b,c,d,e,f){var g="";g+=d.fv;if(b!==null){g+=d.ed;g+=this.fp(d,b);g+=d.ff}if(c!==null){g+=d.dd;g+=this.fo(d,c);g+=d.ff}if(f!==null){g+=d.dh;g+=this.fo(d,f);g+=d.ff}if(e!==null){g+=d.fn;g+=this.fo(d,e);g+=d.ff}g+=d.fc;return g};
a.f3=function(b,c,d,e,f){var g="";g+=e.bc;g+=e.du;g+=this.fp(e,b.subject);g+=e.ff;var h=b.content;if(b.compressed)if(this.o){var i=this.cp(h);if(i.length<h.length)h=i;else b.compressed=false}else{this.u("Please install `pako` package to use compression feature.");b.compressed=false}g+=e.dv;g+=this.fp(e,h);g+=e.ff;if(b.closure!==undefined&&b.closure!==null){g+=e.dw;g+=this.fp(e,b.closure);g+=e.ff}if(b.replySubject!==undefined&&b.replySubject!==null){g+=e.dy;g+=this.fp(e,b.replySubject);g+=e.ff}if(c!==
null){g+=e.fn;g+=this.fo(e,c);g+=e.ff}if(d!==null){g+=e.dd;g+=this.fo(e,d);g+=e.ff}if(f!==null){g+=e.dh;g+=this.fo(e,f);g+=e.ff}if(b.qos!==undefined&&b.qos!==null){if(b.qos==MigratoryDataClient.QOS_GUARANTEED){g+=e.e9;g+=this.fo(e,MigratoryDataClient.bt)}else{g+=e.e9;g+=this.fo(e,MigratoryDataClient.bs)}g+=e.ff}if(b.retained!==undefined&&b.retained!==null){if(b.retained===true){g+=e.dz;g+=this.fo(e,1)}else{g+=e.dz;g+=this.fo(e,0)}g+=e.ff}if(b.compressed!==undefined&&b.compressed!==null)if(b.compressed===
true){g+=e.e0;g+=this.fo(e,1);g+=e.ff}g+=e.fc;return g};a.ft=function(b){var c=MigratoryDataClient.c2;if(b.seqid!=Number.MAX_SAFE_INTEGER)if(b.nrOfConsecutiveRecovery>=this.y){if(b.history>0)c=MigratoryDataClient.c3}else c=MigratoryDataClient.c4;else if(b.history>0)c=MigratoryDataClient.c3;if(c==MigratoryDataClient.c2||c==MigratoryDataClient.c3){b.cacheRecoveryStatus=MigratoryDataClient.c5;b.nrOfConsecutiveRecovery=0}return b.currentSubscribeType=c};a.cy={};a.cy.fc="";a.cy.fa="\u0019";a.cy.ff="\u001e";
a.cy.fw="\u001f";a.cy.fx="\u0000";a.cy.fy="\n";a.cy.fz="\r";a.cy.g0='"';a.cy.g1="\\";a.cy.b7="\u0001";a.cy.b8="\u0002";a.cy.cz="\u0003";a.cy.b9="\u0004";a.cy.g2="\u0005";a.cy.g3="\u0006";a.cy.d1="\t";a.cy.g4="\u000c";a.cy.bc="\u0010";a.cy.d3="\u0013";a.cy.d5="\u0008";a.cy.g5="\u0017";a.cy.bb="\u001a";a.cy.d7="\u0007";a.cy.fv="\u000b";a.cy.du="\u0001";a.cy.dv="\u0002";a.cy.e4="\u0003";a.cy.e3="\u0004";a.cy.fn="\u0005";a.cy.dd="\u0006";a.cy.g6="\u0007";a.cy.g7="\u0008";a.cy.g8="\t";a.cy.ds="\u000b";
a.cy.g9="\u000c";a.cy.e1="\u000e";a.cy.ga="\u000f";a.cy.dw="\u0010";a.cy.df="\u0011";a.cy.ed="\u0013";a.cy.dr="\u0014";a.cy.dh="\u0015";a.cy.dz="\u0017";a.cy.e9="\u0018";a.cy.fq="#";a.cy.fr="$";a.cy.dg="%";a.cy.dx="'";a.cy.fu="(";a.cy.dy=",";a.cy.fs="-";a.cy.di="0";a.cy.dk="\u001d";a.cy.e0="&";a.cy.gb={};(function(b){var c=b.gb;c[b.fc]="\u0001";c[b.ff]="\u0002";c[b.fw]="\u0003";c[b.fx]="\u0004";c[b.fy]="\u0005";c[b.fz]="\u0006";c[b.g0]="\u0007";c[b.g1]="\u0008";c["!"]="\t";c[b.fa]="\u000b"})(MigratoryDataClient.prototype.cy);
MigratoryDataClient.prototype.cy.gc={};(function(b){for(var c in b.gb)if(b.gb.hasOwnProperty(c))b.gc[b.gb[c]]=c})(MigratoryDataClient.prototype.cy);MigratoryDataClient.prototype.cy.fe={};(function(b){b.fe[b.b7]=true;b.fe[b.b8]=true;b.fe[b.cz]=true;b.fe[b.b9]=true;b.fe[b.g2]=true;b.fe[b.g3]=true;b.fe[b.d1]=true;b.fe[b.g4]=true;b.fe[b.bc]=true;b.fe[b.d3]=true;b.fe[b.d5]=true;b.fe[b.g5]=true;b.fe[b.bb]=true;b.fe[b.d7]=true;b.fe[b.fv]=true})(MigratoryDataClient.prototype.cy);
MigratoryDataClient.prototype.cy.fg={};
(function(b){b.fg[b.du]=true;b.fg[b.dv]=true;b.fg[b.e4]=true;b.fg[b.e3]=true;b.fg[b.fn]=true;b.fg[b.dd]=true;b.fg[b.g6]=true;b.fg[b.g7]=true;b.fg[b.g8]=true;b.fg[b.ds]=true;b.fg[b.g9]=true;b.fg[b.e1]=true;b.fg[b.ga]=true;b.fg[b.df]=true;b.fg[b.ed]=true;b.fg[b.dr]=true;b.fg[b.dh]=true;b.fg[b.dz]=true;b.fg[b.e9]=true;b.fg[b.dx]=true;b.fg[b.fq]=true;b.fg[b.fr]=true;b.fg[b.dw]=true;b.fg[b.fu]=true;b.fg[b.dg]=true;b.fg[b.dy]=true;b.fg[b.fs]=true;b.fg[b.di]=true;b.fg[b.dk]=true;b.fg[b.e0]=true})(MigratoryDataClient.prototype.cy);
a=MigratoryDataClient.prototype;a.fi={};a.fi.gd=1;a.fi.ge=2;a.fi.fl=3;a.fi.fj=4;a.fi.gf={};(function(b){var c=b.gf;c.du=b.fl;c.dv=b.fl;c.e4=b.fj;c.e3=b.fj;c.fn=b.fj;c.dd=b.fj;c.g6=b.fl;c.g7=b.fl;c.g8=b.fl;c.ds=b.fj;c.g9=b.fl;c.e1=b.fj;c.ga=b.fj;c.ed=b.fl;c.dr=b.fl;c.dh=b.fj;c.dx=b.fl;c.fq=b.fl;c.fr=b.fj;c.dw=b.fl;c.df=b.fj;c.dg=b.fj;c.dy=b.fl;c.fs=b.fj;c.di=b.fl;c.dz=b.fj;c.e9=b.fj;c.dk=b.fj;c.e0=b.fj})(MigratoryDataClient.prototype.fi);MigratoryDataClient.prototype.cy.fh={};
(function(){for(var b in MigratoryDataClient.prototype.fi.gf)if(MigratoryDataClient.prototype.fi.gf.hasOwnProperty(b))MigratoryDataClient.prototype.cy.fh[MigratoryDataClient.prototype.cy[b]]=MigratoryDataClient.prototype.fi.gf[b]})();MigratoryDataClient.prototype.fp=function(b,c){for(var d="",e=0;e<c.length;e++){var f=b.gb[c.charAt(e)];if(f!==undefined){d+=b.fw;d+=f}else d+=c.charAt(e)}return d};
MigratoryDataClient.prototype.fm=function(b,c){for(var d="",e=0;e<c.length;e++){var f=c.charAt(e);if(f===b.fw){if(e+1>=c.length||b.gc[c.charAt(e+1)]===undefined)throw"Error: fm() Illegal argument '"+c+"'!";f=b.gc[c.charAt(e+1)];e++}d+=f}return d};
MigratoryDataClient.prototype.fo=function(b,c){if((c&4294967168)===0){var d=String.fromCharCode(c),e=b.gb[d];return e===undefined?d:b.fw+e}var f;f=(c&4278190080)!==0?24:(c&16711680)!==0?16:8;d=[];for(e=0;e<10;e++)d.push(0);for(var g=0,h=0;f>=0;){var i=c>>f&255;h++;d[g]|=i>>h;e=b.gb[String.fromCharCode(d[g])];if(e!==undefined){d[g]=b.fw.charCodeAt(0);d[g+1]=e.charCodeAt(0);g++}g++;d[g]|=i<<7-h&127;f-=8}e=b.gb[String.fromCharCode(d[g])];if(e!==undefined){d[g]=b.fw.charCodeAt(0);d[g+1]=e.charCodeAt(0);
g++}g++;b="";for(e=0;e<g;e++)b+=String.fromCharCode(d[e]);return b};
MigratoryDataClient.prototype.fk=function(b,c){var d="Error: fk() Illegal argument '"+c+"'!",e=0,f=-1,g=0,h,i=c.length,j=0;if(i===1)return c.charCodeAt(0);else if(i===2&&c.charAt(0)===b.fw){h=b.gc[c.charAt(1)];if(h!==undefined)return h.charCodeAt(0);else throw d;}for(;i>0;i--){h=c.charAt(j);j++;if(h===b.fw){if(i-1<0)throw d;i--;h=c.charAt(j);j++;h=b.gc[h];if(h===undefined)throw d;}else h=h;if(f>0){g|=h.charCodeAt(0)>>f;e=e<<8|g;g=h.charCodeAt(0)<<8-f}else g=h.charCodeAt(0)<<-f;f=(f+7)%8}return e};
MigratoryDataClient.NOTIFY_UNSUPPORTED_BROWSER="NOTIFY_UNSUPPORTED_BROWSER";MigratoryDataClient.NOTIFY_SERVER_DOWN="NOTIFY_SERVER_DOWN";MigratoryDataClient.NOTIFY_SERVER_UP="NOTIFY_SERVER_UP";MigratoryDataClient.NOTIFY_DATA_RESYNC="NOTIFY_DATA_RESYNC";MigratoryDataClient.NOTIFY_DATA_SYNC="NOTIFY_DATA_SYNC";MigratoryDataClient.NOTIFY_PUBLISH_OK="NOTIFY_PUBLISH_OK";MigratoryDataClient.NOTIFY_PUBLISH_FAILED="NOTIFY_PUBLISH_FAILED";MigratoryDataClient.NOTIFY_PUBLISH_DENIED="NOTIFY_PUBLISH_DENIED";
MigratoryDataClient.NOTIFY_SUBSCRIBE_ALLOW="NOTIFY_SUBSCRIBE_ALLOW";MigratoryDataClient.NOTIFY_SUBSCRIBE_DENY="NOTIFY_SUBSCRIBE_DENY";MigratoryDataClient.NOTIFY_MESSAGE_SIZE_LIMIT_EXCEEDED="NOTIFY_MESSAGE_SIZE_LIMIT_EXCEEDED";MigratoryDataClient.NOTIFY_CONNECT_OK="NOTIFY_CONNECT_OK";MigratoryDataClient.NOTIFY_CONNECT_DENY="NOTIFY_CONNECT_DENY";MigratoryDataClient.CONSTANT_WINDOW_BACKOFF="CONSTANT_WINDOW_BACKOFF";MigratoryDataClient.TRUNCATED_EXPONENTIAL_BACKOFF="TRUNCATED_EXPONENTIAL_BACKOFF";
MigratoryDataClient.TRANSPORT_HTTP="TRANSPORT_HTTP";MigratoryDataClient.TRANSPORT_WEBSOCKET="TRANSPORT_WEBSOCKET";MigratoryDataClient.QOS_STANDARD="QOS_STANDARD";MigratoryDataClient.QOS_GUARANTEED="QOS_GUARANTEED";MigratoryDataClient.MESSAGE_TYPE_SNAPSHOT="MESSAGE_TYPE_SNAPSHOT";MigratoryDataClient.MESSAGE_TYPE_UPDATE="MESSAGE_TYPE_UPDATE";MigratoryDataClient.MESSAGE_TYPE_RECOVERED="MESSAGE_TYPE_RECOVERED";MigratoryDataClient.MESSAGE_TYPE_HISTORICAL="MESSAGE_TYPE_HISTORICAL";a=MigratoryDataClient.prototype;
a.connect=function(){if(this.b3)throw"Error: connect() - already connected";if(this.a2===undefined||this.a2===null||this.a2.length===0)throw"Error: connect() - no server to connect to; use setServers() to specify one or more servers";if(this.a3===undefined||this.a3===null)throw"Error: connect() - no message handler; use setMessageHandler() to specify a message handler";if(this.a4===undefined||this.a4===null)throw"Error: connect() - no status handler; use setStatusHandler() to specify a status handler";
this.b3=true;var b={};b.d9=MigratoryDataClient.bb;this.eg(b);if(this.a8.length>0){b={};b.d9=MigratoryDataClient.b7;b.aa=this.cr(this.a8);b.es=this.cm(this.a9,[]);b.er=true;this.eg(b)}};a.notifyAfterFailedConnectionAttempts=function(b){if(this.b3)throw"Error: notifyAfterFailedConnectionAttempts() - already connected; use this method before connect()";if(typeof b!=="number"||b<1)throw"Error: notifyAfterFailedConnectionAttempts() - invalid argument; expected a positive integer";this.v=b};
a.setServers=function(b){if(this.b3)throw"Error: setServers() - already connected; use this method before connect()";this.cv("setServers",b,"string",1,/^(\d+)?\s*https?:\/\/(\w|-)+(\.(\w|-)+)*(:\d+)?$/i,"Error: setServers() - invalid argument; expected a list of URLs");for(var c=[],d=0;d<b.length;d++){var e=/https?:\/\/(\w|-)+(\.(\w|-)+)*(:\d+)?$/i.exec(b[d])[0],f=/^\d+/.exec(b[d]);if(f===null)f=100;else{f=parseInt(f[0]);if(f>100)throw"Error: setServers() - invalid weight; expected a number between 0 and 100";
}c.push({dn:e,f7:f})}this.a2=c;this.as.av=[];for(d=0;d<b.length;d++){this.as.av[d]={};this.as.av[d].dm=0;this.as.av[d].eh=0;this.as.av[d].dq=0;this.as.av[d].ef=0;this.as.av[d].e8=0;this.as.av[d].ea={}}};a.getSubjects=function(){return this.cr(this.a8)};a.setMessageHandler=function(b){if(this.b3)throw"Error: setMessageHandler() - already connected; use this method before connect()";if(typeof b!=="function")throw"Error: setMessageHandler() - invalid argument; expected a function";this.a3=b};
a.setStatusHandler=function(b){if(this.b3)throw"Error: setStatusHandler() - already connected; use this method before connect()";if(typeof b!=="function")throw"Error: setStatusHandler() - invalid argument; expected a function";this.a4=b};a.subscribe=function(b){this.subscribeWithHistory(b,0)};
a.subscribeWithHistory=function(b,c){this.cw("subscribeWithHistory",b,"string",1,"Error: subscribe() - invalid first argument; expected a list of valid topics");if(typeof c!=="number"||c<0)throw"Error: subscribeWithHistory() - invalid second argument; expected an integer higher or equal to 0";b=this.cs(b,this.a8);if(b.length!==0){for(var d=0;d<b.length;d++)this.a9[b[d]]=c;this.a8=this.cu(this.a8,b);if(this.b3){c={};c.d9=MigratoryDataClient.b7;c.aa=b;c.es=this.cm(this.a9,b);c.er=true;this.eg(c)}}};
a.unsubscribe=function(b){this.cw("unsubscribe",b,"string",1,"Error: unsubscribe() - invalid argument; expected a list of valid topics");b=this.ct(b,this.a8);if(b.length!==0){for(var c=0;c<b.length;c++)delete this.a9[b[c]];this.a8=this.cs(this.a8,b);if(this.b3){c={};c.d9=MigratoryDataClient.b8;c.aa=b;this.eg(c)}}};a.disconnect=function(){if(this.b3){this.b3=false;this.f5()}};
a.setEntitlementToken=function(b){if(b===undefined||b===null||b.length==0)throw"Error: setEntitlementToken() - invalid token, null or empty.";this.z=b;if(this.b3){var c={};c.d9=this.ba;c.ez=b;this.eg(c)}};
a.getInfo=function(){if(!this.b3)throw"Error: getInfo() - not connected; use this method after connect()";var b="Date: "+(new Date).toString()+"\n";b+="Uptime: "+((new Date).getTime()-this.as.at)+" ms\n";b+="Servers: ";for(var c=0;c<this.a2.length;c++){if(c>0)b+=", ";b+=this.a2[c].f7+" "+this.a2[c].dn}b+="\nSubjects: "+this.aa.toString()+"\n";b+="Connection status ["+(this.a6===null?null:this.a2[this.a6].dn)+"]: "+this.a7+"\n";b+="Time from last server activity: "+(this.as.au!==null?(new Date).getTime()-
this.as.au:null)+" ms\n";b+="Servers down before notify: "+this.v+"\n";b+="Consecutive server down count: "+this.ai+" times\n";for(c=0;c<this.as.av.length;c++){b+="\nServer up ["+this.a2[c].dn+"]: "+this.as.av[c].dm+" times\n";b+="Server down ["+this.a2[c].dn+"]: "+this.as.av[c].eh+" times\n";b+="Server connection recycled ["+this.a2[c].dn+"]: "+this.as.av[c].dq+" times\n";b+="Received server events ["+this.a2[c].dn+"]: "+this.as.av[c].ef+"\n";b+="Received messages ["+this.a2[c].dn+"]: "+this.as.av[c].e8+
"\n";for(var d in this.as.av[c].ea)if(this.as.av[c].ea.hasOwnProperty(d))b+="Error ["+this.a2[c].dn+"] x"+this.as.av[c].ea[d]+" times : "+d+"\n"}return b};
a.publish=function(b){if(!this.b3)throw"Error: publish() - not connected; use this method after connect()";if(b===undefined||b===null)throw"Error: publish() - invalid argument; expected a valid message";if(b.subject===undefined||b.subject===null)throw"Error: publish() - invalid argument; expected a valid message with a non-empty topic";this.cw("publish",[b.subject],"string",1,"Error: publish() - invalid argument; expected a valid subject,  "+b.subject+" is the cause of the error");if(b.content===
undefined||b.content===null)throw"Error: publish() - invalid argument; expected a valid message with a non-empty content";if(b.replySubject!==undefined&&b.replySubject!==null){this.cw("publish",[b.replySubject],"string",1,"Error: publish() - invalid argument; expected a valid replySubject,  "+b.replySubject+" is the cause of the error");this.subscribe([b.replySubject])}var c={};c.d9=MigratoryDataClient.bc;c.f2=b;this.eg(c)};
a.setQuickReconnectMaxRetries=function(b){if(this.b3)throw"Error: setQuickReconnectMaxRetries() - already connected; use this method before connect()";if(typeof b!=="number"||b<2)throw"Error: setQuickReconnectMaxRetries() - invalid argument; expected an integer higher or equal to 2";this.ax=b};
a.setQuickReconnectInitialDelay=function(b){if(this.b3)throw"Error: setQuickReconnectInitialDelay() - already connected; use this method before connect()";if(typeof b!=="number"||b<1)throw"Error: setQuickReconnectInitialDelay() - invalid argument; expected an integer higher or equal to 1";this.ay=b*1E3};
a.setReconnectPolicy=function(b){if(this.b3)throw"Error: setReconnectPolicy()  - already connected; use this method before connect()";if(b===undefined||b!==MigratoryDataClient.CONSTANT_WINDOW_BACKOFF&&b!==MigratoryDataClient.TRUNCATED_EXPONENTIAL_BACKOFF)throw"Error: setReconnectPolicy() - invalid argument; expected CONSTANT_WINDOW_BACKOFF or TRUNCATED_EXPONENTIAL_BACKOFF";this.az=b};
a.setReconnectTimeInterval=function(b){if(this.b3)throw"Error: setReconnectTimeInterval() - already connected; use this method before connect()";if(typeof b!=="number"||b<1)throw"Error: setReconnectTimeInterval() - invalid argument; expected an integer higher or equal to 1";this.b0=b*1E3};
a.setReconnectMaxDelay=function(b){if(this.b3)throw"Error: setReconnectMaxDelay() - already connected; use this method before connect()";if(typeof b!=="number"||b<1)throw"Error: setReconnectMaxDelay() - invalid argument; expected an integer higher or equal to 1";this.b1=b*1E3};a.pause=function(){if(!this.b3)throw"Error: pause() - not connected; use this method after connect()";if(this.b4!=false){this.b4=false;this.u("Enter pause!");var b={};b.d9=MigratoryDataClient.bd;this.eg(b)}};
a.resume=function(){if(!this.b3)throw"Error: resume() - not connected; use this method after connect()";if(this.b4!=true){this.b4=true;this.u("Enter resume!");var b={};b.d9=MigratoryDataClient.be;this.eg(b)}};a.setLogHandler=function(b){if(typeof b!=="function")throw"Error: setLogHandler() - invalid argument; expected a function";this.u=b};
a.setTransport=function(b){if(this.b3)throw"Error: setTransport() - already connected; use this method before connect()";if(b===undefined||b!==MigratoryDataClient.TRANSPORT_HTTP&&b!==MigratoryDataClient.TRANSPORT_WEBSOCKET)throw"Error: setTransport() - invalid argument; expected TRANSPORT_HTTP or TRANSPORT_WEBSOCKET";this.m==false&&this.n==false?this.u("Warning: setTransport() - ignore method call for browser (use websocket by default)"):this.q(b)};
a.setDnsOptions=function(b){if(this.b3)throw"Error: setDnsOptions() - already connected; use this method before connect()";this.m==false?this.u("Warning: setDnsOptions() - ignore method call for browser"):this.r(b)};if(typeof module!="undefined")module.exports=MigratoryDataClient;
